RewriteEngine On

# 1. Redirect direct requests for .php files to the extensionless version
#    (e.g. /about.php -> /about)
#    This prevents users from seeing the .php extension in the address bar.
RewriteCond %{THE_REQUEST} \s/+(.+?)\.php[\s?] [NC]
RewriteRule ^ /%1 [R=301,L,NE]

# 2. Handle extensionless requests
#    (e.g. /about -> serves about.php)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+?)/?$ $1.php [L]

# 4. Error Handling
ErrorDocument 404 /404.php
ErrorDocument 500 /500.php